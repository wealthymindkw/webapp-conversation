@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================== */
/* 1. الخلفية الأساسية (بدون تدمير الصناديق الداخلية) */
/* ========================================== */
html, body, #app-container {
    background-color: #212121 !important;
    color: #ECECEC !important;
    height: 100dvh !important;
    max-width: 100vw !important;
    overflow-x: hidden !important; /* لنسف أي سكرول عرضي */
}

/* ========================================== */
/* 2. إخفاء الخطوط المزعجة */
/* ========================================== */
[class*="border-gray-"] { border-color: transparent !important; }

/* ========================================== */
/* 3. الشريط الجانبي والهيدر */
/* ========================================== */
aside, .sidebar, div[class*="w-[240px]"] { background-color: #171717 !important; }
header, div[class*="h-16"] { background-color: #212121 !important; }
.bg-primary-50, div[class*="bg-primary-50"] {
    background-color: #2F2F2F !important;
    color: #ECECEC !important;
    border-radius: 8px !important;
}

/* تنظيف الخلفيات البيضاء */
.bg-white:not([class*="cl-"]), div[class*="bg-blue-100"]:not([class*="cl-"]) { 
    background-color: transparent !important; 
}

/* ========================================== */
/* 4. صورتك الشخصية */
/* ========================================== */
header .app-icon, header div[class*="shrink-0"]:has(svg), div[class*="chat-answer"] .app-icon {
    background-color: transparent !important;
    border-radius: 50% !important;
    background-image: url(https://assets.cdn.filesafe.space/rhWELETMkXWiHgXmcNv0/media/69984ecd63ae7520d51f9030.png) !important;
    background-size: cover !important;
    background-position: center !important;
}
header .app-icon svg, header div[class*="shrink-0"] svg, div[class*="chat-answer"] .app-icon svg { display: none !important; }

/* ========================================== */
/* 5. فقاعات المحادثة */
/* ========================================== */
.mr-2.py-3.px-4.bg-blue-500, div[class*="bg-blue-500"] {
    background-color: #2F2F2F !important;
    color: #ECECEC !important;
    border-radius: 20px !important;
}
.ml-2.py-3.px-4.bg-gray-100, div[class*="bg-gray-100"] {
    background-color: transparent !important;
    color: #ECECEC !important;
}

/* ========================================== */
/* 6. صندوق الكتابة (مرتب وبوردر واضح نفس ChatGPT) */
/* ========================================== */
div[class*="absolute bottom-0"]:has(textarea), div[class*="p-4"]:has(textarea) {
    background: transparent !important;
    padding-bottom: 24px !important;
    pointer-events: auto !important;
    margin-bottom: env(safe-area-inset-bottom) !important;
}

div[class*="relative"]:has(> textarea), div[class*="flex"]:has(> textarea) {
    background-color: #2F2F2F !important;
    border: 1px solid rgba(255, 255, 255, 0.25) !important;
    border-radius: 26px !important;
    padding: 12px 55px 12px 16px !important;
    margin: 0 auto !important;
    max-width: 768px !important;
    width: 100% !important;
    position: relative !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
    pointer-events: auto !important;
}

textarea {
    background: transparent !important;
    color: #ECECEC !important;
    font-size: 16px !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
    line-height: 1.5 !important;
    pointer-events: auto !important;
}
textarea:focus { outline: none !important; }

/* ========================================== */
/* 7. زر الإرسال (السهم) ونسف الرقم صفر */
/* ========================================== */
div[class*="relative"]:has(> textarea) button, div[class*="relative"]:has(> textarea) div[class*="bg-primary"] {
    position: absolute !important;
    right: 8px !important;
    bottom: 8px !important;
    background-color: #ECECEC !important;
    background-image: none !important; 
    border-radius: 50% !important;
    width: 32px !important;
    height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
}
div[class*="relative"]:has(> textarea) svg { 
    color: #212121 !important;
    width: 16px !important; 
    height: 16px !important;
    display: block !important;
}

div[class*="relative"]:has(> textarea) > div[class*="absolute"] > div:not(:has(svg)):not(button),
div[class*="relative"]:has(> textarea) > div[class*="absolute"] > span {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
}

/* ========================================== */
/* 8. إخفاء الحقوق وتصحيح نصوص Clerk */
/* ========================================== */
a[href*="dify.ai"], .powered-by, img[alt*="dify"] { display: none !important; }

.text-gray-900:not([class*="cl-"]), .text-gray-800:not([class*="cl-"]), .text-gray-700:not([class*="cl-"]) { color: #ECECEC !important; }
h1:not([class*="cl-"]), h2:not([class*="cl-"]), .font-bold:not([class*="cl-"]), .font-medium:not([class*="cl-"]) { color: #ECECEC !important; }
button[class*="bg-primary"]:not([class*="cl-"]), .btn-primary:not([class*="cl-"]) { background-color: #2F2F2F !important; color: #ECECEC !important; }

.login-btn {
    background-color: #ECECEC !important;
    color: #212121 !important; 
    font-weight: 500 !important;
    padding: 6px 16px !important;
    border-radius: 9999px !important;
}
.login-btn:hover { background-color: #FFFFFF !important; }

/* ========================================== */
/* 9. إخفاء حقوق Secured by Clerk */
/* ========================================== */
div[class*="cl-internal"]:has(a[href*="clerk.com"]),
div[class*="cl-internal"]:has(a[href*="clerk.dev"]) {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
}

/* ========================================== */
/* 10. المساحة السفلية للمحادثات (الحل الصحيح والآمن) */
/* ========================================== */
/* نستهدف فقط المربع القابل للسكرول ونعطيه مساحة من تحت تعادل حجم البوكس */
#scrollable-content, div[class*="overflow-y-auto"] {
    padding-bottom: 140px !important;
}
