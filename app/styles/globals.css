@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================== */
/* 1. الخلفية الكحلية المائلة (Tony Robbins) */
/* ========================================== */
html, body {
    background: linear-gradient(160deg, #232938 0%, #232938 50%, #232938 100%) !important;
    background-attachment: fixed !important;
    color: #F9FAFB !important;
    min-height: 100vh !important;
}

main, .chat-container, div[class*="bg-white"], div[class*="bg-gray"] {
    background: transparent !important;
}

/* ========================================== */
/* 2. الهيدر - يكون فوق السايدبار دائماً */
/* ========================================== */
header, .header,
div[class*="border-b-gray-200"],
.flex.items-center.justify-between.h-16 {
    background: rgba(8, 11, 20, 0.95) !important;
    backdrop-filter: blur(12px) !important;
    border-color: rgba(255,255,255,0.06) !important;
    position: relative !important;
    z-index: 50 !important; /* تم رفعه لضمان عدم التداخل */
}

/* ========================================== */
/* 3. الشريط الجانبي (Sidebar) */
/* ========================================== */
/* شلنا أكواد الموبايل المعقدة لأن ملف index.tsx صار يتكفل فيها */
aside, .sidebar,
div[class*="border-r-gray-200"],
.flex-col.h-full.border-r {
    background: linear-gradient(180deg, #0a0e1a 0%, #080b14 100%) !important;
    border-color: rgba(255,255,255,0.06) !important;
    color: #F9FAFB !important;
}

/* ========================================== */
/* 4. تلوين الخلفيات البيضاء وتصحيح النصوص */
/* ========================================== */
.bg-white, .bg-gray-50, .bg-gray-100 { background-color: transparent !important; }
.border-gray-200, .border-gray-100 { border-color: rgba(255,255,255,0.06) !important; }

footer, .footer { background: transparent !important; color: #4B5563 !important; }

.text-gray-900, .text-gray-800, .text-gray-700, .text-gray-600 { color: #E5E7EB !important; }
h1, .font-bold { color: #ffffff !important; }
h2, .font-medium { color: #cbd5e1 !important; }

.bg-primary-50 {
    background-color: rgba(255,255,255,0.05) !important;
    color: #C5A059 !important;
}

/* ========================================== */
/* 5. أيقونة الهيدر وإخفاء الحقوق */
/* ========================================== */
a[href*="dify.ai"], img[alt*="dify"], svg[class*="dify"], .powered-by { display: none !important; }

.app-icon, header .app-icon, header .w-8.h-8 {
    background-image: url(https://assets.cdn.filesafe.space/rhWELETMkXWiHgXmcNv0/media/69984ecd63ae7520d51f9030.png) !important;
    background-size: cover !important;
    background-position: center !important;
    border: 1.5px solid rgba(197, 160, 89, 0.6) !important;
    border-radius: 50% !important;
    width: 32px !important;
    height: 32px !important;
}
header svg:first-child, .app-icon svg { display: none !important; }

/* ========================================== */
/* 6. إخفاء العناصر المزعجة (النصوص والعداد) */
/* ========================================== */
#send-tip, [id="send-tip"], .rc-tooltip,
.text-xs.text-gray-500, div[class*="text-xs text-gray-"] {
    display: none !important;
    opacity: 0 !important;
}
div[class*="items-center justify-between"]:not(header) .font-semibold,
div[class*="shrink-0 h-"]:has(+ div[class*="overflow"]) span {
    display: none !important;
}

/* ========================================== */
/* 7. فقاعات المحادثة (User + Bot) */
/* ========================================== */
.mr-2.py-3.px-4.bg-blue-500, div[class*="bg-blue-500"] {
    background: linear-gradient(135deg, #2563EB, #1d4ed8) !important;
    border-radius: 20px 20px 4px 20px !important;
    color: #ffffff !important;
    box-shadow: 0 2px 12px rgba(37, 99, 235, 0.3) !important;
    border: none !important;
}

.ml-2.py-3.px-4.bg-gray-100, div[class*="bg-gray-100"] {
    background: rgba(22, 28, 45, 0.95) !important;
    border-radius: 4px 20px 20px 20px !important;
    color: #F1F5F9 !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
    box-shadow: 0 2px 16px rgba(0,0,0,0.3) !important;
}

/* ========================================== */
/* 8. صندوق الكتابة السفلي (المشكلة انحلت هنا) */
/* ========================================== */
/* تأمين مساحة الصندوق بالأسفل */
div[class*="absolute bottom-0"]:has(textarea),
div[class*="p-4"]:has(textarea) {
    background: transparent !important;
    border: none !important;
    padding-bottom: 20px !important; /* يعطي مساحة للصندوق عشان يطوف */
}

/* تصميم الصندوق العائم */
div[class*="relative"]:has(> textarea),
div[class*="flex"]:has(> textarea) {
    background: rgba(12, 16, 28, 0.9) !important;
    backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 28px !important;
    padding: 10px 48px 10px 16px !important;
    margin: 0 10px !important;
    box-shadow: 0 4px 24px rgba(0,0,0,0.4) !important;
}

textarea {
    background: transparent !important;
    color: #ffffff !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    font-size: 16px !important;
    line-height: 1.5 !important;
}
textarea::placeholder { color: rgba(255,255,255,0.3) !important; }
textarea:focus { outline: none !important; box-shadow: none !important; }

/* زر الإرسال المدمج */
div:has(> textarea) button,
div:has(> textarea) div[class*="bg-primary"] {
    position: absolute !important;
    right: 6px !important;
    bottom: 6px !important;
    background: linear-gradient(135deg, #2563EB, #1d4ed8) !important;
    border-radius: 50% !important;
    width: 34px !important;
    height: 34px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
}
div:has(> textarea) svg { color: #FFFFFF !important; width: 16px !important; height: 16px !important; }

/* ========================================== */
/* 9. ضبط الأيقونات والأزرار الجانبية */
/* ========================================== */
svg { max-width: 24px !important; max-height: 24px !important; }

button[class*="bg-primary"], .btn-primary {
    background-color: #C5A059 !important;
    color: #000000 !important;
}
button[class*="text-gray-"], a[class*="text-gray-"] { color: #E5E7EB !important; }
button:hover[class*="bg-gray-"], a:hover[class*="bg-gray-"] {
    background-color: rgba(255,255,255,0.05) !important;
}
